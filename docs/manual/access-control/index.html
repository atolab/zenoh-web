<!doctype html><html lang=en><head><link rel=apple-touch-icon sizes=180x180 href=../../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../../favicon-16x16.png><link rel=manifest href=../../../site.webmanifest><link rel=mask-icon href=../../../safari-pinned-tab.png><meta name=msapplication-TileImage content="/safari-pinned-tab.png"><meta name=msapplication-TileColor content="#7da7d8"><meta name=theme-color content="#7da7d8"><meta charset=utf-8><meta name=description content="Eclipse Zenoh, unify data in motion, data at rest and computations."><meta name=keywords content="pub/sub,query,geo distributed storage,Rust,protocol,DDS,MQTT,Edge,IoT,MEC"><meta name=author content="The Zenoh Team"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=../../../css/bootstrap-reboot.css><link rel=stylesheet href=../../../css/bootstrap.css><link rel=stylesheet href=../../../css/font-awesome.min.css><link rel=stylesheet href=../../../css/ato.css><link rel=stylesheet href=../../../css/syntax.css><link rel=alternate type=application/rss+xml href=../../../blog/index.xml><title>Access Control · Zenoh - pub/sub, geo distributed storage, query</title></head><body><header class="navbar-expand navbar-dark d-flex flex-column flex-md-row align-items-md-center ato-navbar"><div class="d-flex flex-row justify-content-between pl-2 pr-2"><a class=navbar-brand href=../../../><img src=../../../img/zenoh-dragon-bg-150x163.png class=align-middle alt></a>
<button class="btn btn-link d-md-none p-0" type=button data-toggle=collapse data-target=#ato-nav aria-controls=ato-nav aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><div class="ato-links collapse pl-4 pl-md-0" id=ato-nav><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item><a class=nav-link href=../../../>Home</a></li><li class=nav-item><a class="nav-link active" href=../../../docs/getting-started/first-app/>Documentation</a></li><li class=nav-item><a class=nav-link href=../../../usecases/>Use Cases</a></li><li class=nav-item><a class=nav-link href=../../../community/>Community</a></li><li class=nav-item><a class=nav-link href=../../../adopters/>Adopters</a></li><li class=nav-item><a class=nav-link href=../../../media/>Media</a></li><li class=nav-item><a class=nav-link href=../../../blog/2024-12-12-zenoh-firesong-1.1.0/>Blog</a></li></ul></div><ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li class=nav-item><a class="nav-link p-2" href=https://github.com/eclipse-zenoh/zenoh target=_blank rel=noopener aria-label=GitHub><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64.0.0 114.61.0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34.0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49.0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75.0.0 21.49-6.88 70.4 26.24a242.65 242.65.0 01128.18.0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69.0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41.0 34.22-.31 61.83-.31 70.23.0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37.0 256 0z" fill="currentcolor" fill-rule="evenodd"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://twitter.com/zettascaletech target=_blank rel=noopener aria-label=Twitter><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false"><title>Twitter</title><path d="M160.83 416.32c193.2.0 298.92-160.22 298.92-298.92.0-4.51.0-9-.2-13.52A214 214 0 00512 49.38a212.93 212.93.0 01-60.44 16.6 105.7 105.7.0 0046.3-58.19 209 209 0 01-66.79 25.37 105.09 105.09.0 00-181.73 71.91 116.12 116.12.0 002.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48.0 0068 159.6a106.27 106.27.0 01-47.53-13.11v1.43a105.28 105.28.0 0084.21 103.06 105.67 105.67.0 01-47.33 1.84 105.06 105.06.0 0098.14 72.94A210.72 210.72.0 0125 370.84a202.17 202.17.0 01-25-1.43 298.85 298.85.0 00160.83 46.92" fill="currentcolor"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://discord.gg/2GJ958VuHs target=_blank rel=noopener aria-label=Discord><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Discord</title><path fill="currentcolor" d="M13.545 2.907a13.227 13.227.0 00-3.257-1.011.05.05.0 00-.052.025c-.141.25-.297.577-.406.833a12.19 12.19.0 00-3.658.0 8.258 8.258.0 00-.412-.833.051.051.0 00-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041.0 00-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276.0 003.995 2.02.05.05.0 00.056-.019c.308-.42.582-.863.818-1.329a.05.05.0 00-.01-.059.051.051.0 00-.018-.011 8.875 8.875.0 01-1.248-.595.05.05.0 01-.02-.066.051.051.0 01.015-.019c.084-.063.168-.129.248-.195a.05.05.0 01.051-.007c2.619 1.196 5.454 1.196 8.041.0a.052.052.0 01.053.007c.08.066.164.132.248.195a.051.051.0 01-.004.085 8.254 8.254.0 01-1.249.594.05.05.0 00-.03.03.052.052.0 00.003.041c.24.465.515.909.817 1.329a.05.05.0 00.056.019 13.235 13.235.0 004.001-2.02.049.049.0 00.021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034.0 00-.02-.019zm-8.198 7.307c-.789.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.45.73 1.438 1.613.0.888-.637 1.612-1.438 1.612zm5.316.0c-.788.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.451.73 1.438 1.613.0.888-.631 1.612-1.438 1.612z"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q target=_blank rel=noopener aria-label=Youtube><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Youtube</title><path fill="currentcolor" d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01.0 011.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007.0 01-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309.0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007.0 01-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82.082 9.716A31.4 31.4.0 010 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007.0 011.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788.0 017.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/></svg></a></li></ul><script async src="https://www.googletagmanager.com/gtag/js?id=G-PBD6MS51QL"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PBD6MS51QL")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":""},"articleSection":"docs","name":"Access Control","headline":"Access Control","datePublished":"0001-01-01 00:00:00 \u002b0000 UTC","dateModified":"0001-01-01 00:00:00 \u002b0000 UTC","url":"\/docs\/manual\/access-control\/","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"1011","wordCount":"1363","keywords":[],"description":"NOTE: This documentation covers the Zenoh 1.0 ACL config. For Zenoh 0.11 ACL config, please refer to the Zenoh 0.11 Access Control Rules RFC\nAccess control enables Zenoh instances to filter (allow or deny) messages, depending on certain characteristics of individual messages and their respective source or destination. Authentication on the other hand allows Zenoh instances to identify certain characteristics in other instances they connect to, which are used to match the remote instances with configured subjects in the ACL policies and apply the rules accordingly on the exhanged messages."}</script></header><div class="container-fluid ato-docs"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 ato-sidebar"><div class="ato-search d-flex justify-content-end"><button class="btn btn-link ato-search-docs-toggle d-md-none p-0 ml-3" type=button data-toggle=collapse data-target=#ato-docs-nav aria-controls=ato-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><nav class="ato-links collapse" id=ato-docs-nav><div class=ato-toc-item><a class=ato-toc-link href=../../../docs/overview/what-is-zenoh/>Overview</a><ul class="nav ato-sidenav"><li><a href=../../../docs/overview/what-is-zenoh/>What is Zenoh?</a></li><li><a href=../../../docs/overview/zenoh-in-action/>Zenoh in action</a></li></ul></div><div class=ato-toc-item><a class=ato-toc-link href=../../../docs/getting-started/first-app/>Getting started</a><ul class="nav ato-sidenav"><li><a href=../../../docs/getting-started/first-app/>Your first Zenoh app</a></li><li><a href=../../../docs/getting-started/installation/>Installation</a></li><li><a href=../../../docs/getting-started/deployment/>Deployment</a></li><li><a href=../../../docs/getting-started/quick-test/>For a quick test using Docker</a></li><li><a href=../../../docs/getting-started/troubleshooting/>Troubleshooting</a></li></ul></div><div class="ato-toc-item active"><a class=ato-toc-link href=../../../docs/manual/abstractions/>Reference manual</a><ul class="nav ato-sidenav"><li><a href=../../../docs/manual/abstractions/>Abstractions</a></li><li><a href=../../../docs/manual/configuration/>Configuration</a></li><li><a href=../../../docs/manual/plugins/>Zenoh plugins</a></li><li><a href=../../../docs/manual/plugin-http/>REST plugin</a></li><li><a href=../../../docs/manual/plugin-storage-manager/>Storage manager plugin</a></li><li><a href=../../../docs/manual/tls/>TLS authentication</a></li><li><a href=../../../docs/manual/quic/>QUIC transport</a></li><li><a href=../../../docs/manual/user-password/>User-Password authentication</a></li><li><a href=../../../docs/manual/access-control/ class=active>Access Control</a></li></ul></div><div class=ato-toc-item><a class=ato-toc-link href=../../../docs/apis/rust/>API</a><ul class="nav ato-sidenav"><li><a href=../../../docs/apis/rust/>Rust API</a></li><li><a href=../../../docs/apis/c/>C API</a></li><li><a href=../../../docs/apis/cpp/>C++ API</a></li><li><a href=../../../docs/apis/python/>Python API</a></li><li><a href=../../../docs/apis/rest/>REST API</a></li><li><a href=../../../docs/apis/kotlin/>Kotlin API</a></li></ul></div><div class=ato-toc-item><a class=ato-toc-link href=../../../docs/migration_0.5_to_0.6/migrationguide-v0.5.x-v0.6.x/>Migration guides v0.5.x → v0.6.x</a><ul class="nav ato-sidenav"><li><a href=../../../docs/migration_0.5_to_0.6/migrationguide-v0.5.x-v0.6.x/>Migrating from Zenoh v0.5.x to Zenoh v0.6.x</a></li><li><a href=../../../docs/migration_0.5_to_0.6/migrationguide-rust-v0.5.x-v0.6.x/>Migrating from Zenoh v0.5.x Rust API to Zenoh v0.6.x Rust API</a></li><li><a href=../../../docs/migration_0.5_to_0.6/migrationguide-c-v0.5.x-v0.6.x/>Migrating from Zenoh-C v0.5.x zenoh-net API to Zenoh-C v0.6.x zenoh API</a></li><li><a href=../../../docs/migration_0.5_to_0.6/migrationguide-python-v0.5.x-v0.6.x/>Migrating from Zenoh v0.5.x Python API to Zenoh v0.6.x Python API</a></li><li><a href=../../../docs/migration_0.5_to_0.6/migrationguide-pico-v0.5.x-v0.6.x/>Migrating from Zenoh-Pico v0.5.x to Zenoh-Pico v0.6.x</a></li><li><a href=../../../docs/migration_0.5_to_0.6/migrationguide-zenohc-zenohpico/>Migrating from Zenoh-C to Zenoh-Pico (and vice-versa)</a></li></ul></div><div class=ato-toc-item><a class=ato-toc-link href=../../../docs/migration_1.0/concepts/>Migration guides v0.11 → v1.0</a><ul class="nav ato-sidenav"><li><a href=../../../docs/migration_1.0/concepts/>Concepts</a></li><li><a href=../../../docs/migration_1.0/rust/>Rust</a></li><li><a href=../../../docs/migration_1.0/c++/>C++</a></li><li><a href=../../../docs/migration_1.0/c_pico/>C / Pico</a></li><li><a href=../../../docs/migration_1.0/python/>Python</a></li><li><a href=../../../docs/migration_1.0/java/>Java</a></li><li><a href=../../../docs/migration_1.0/kotlin/>Kotlin</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 ato-toc"><div class=section-nav><nav id=TableOfContents><ul><li><a href=#acl-configuration>ACL configuration</a><ul><li><a href=#rules>rules</a></li><li><a href=#subjects>subjects</a></li><li><a href=#policies>policies</a></li></ul></li><li><a href=#guidelines-for-configuring-acl>Guidelines for configuring ACL</a></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 ato-content ato-docs"><h1 class=ato-title>Access Control</h1><div class=github-edit><a class="fa fa-github" href=https://github.com/atolab/zenoh-web/tree/master/content/docs/manual/access-control.md>Edit on GitHub</a></div><p><em>NOTE: This documentation covers the Zenoh 1.0 ACL config. For Zenoh 0.11 ACL config,
please refer to the <a href=https://github.com/eclipse-zenoh/roadmap/blob/ca841fe219890bf73289089b520271d70ded89b6/rfcs/ALL/Access%20Control%20Rules.md>Zenoh 0.11 Access Control Rules RFC</a></em></p><p><em>Access control</em> enables Zenoh instances to filter (allow or deny) messages,
depending on certain characteristics of individual messages and their respective source or destination.
<em>Authentication</em> on the other hand allows Zenoh instances to identify certain characteristics in other instances they connect to,
which are used to match the remote instances with configured subjects in the ACL policies and apply the rules accordingly on the exhanged messages.</p><p>The configuration of access control policies is done via a <a href=../configuration>configuration file</a>.</p><hr><h2 id=acl-configuration>ACL configuration</h2><p>ACL configuration mainly consists of three components: <code>rules</code>, <code>subjects</code> and <code>policies</code>, to which is added the <code>default_permission</code> (<code>allow</code> or <code>deny</code>) to be applied on messages that do not match the configured policies.</p><p>The <code>enabled</code> boolean field allows to enable and disable ACL. Note that ACL config cannot be updated at runtime, and requires a restart of the instance to reflect the changes.</p><p>Below is the example config we will be analyzing in this documentation.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;access_control&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#309;font-weight:700>&#34;enabled&#34;</span>: <span style=color:#069;font-weight:700>true</span>,
</span></span><span style=display:flex><span>    <span style=color:#309;font-weight:700>&#34;default_permission&#34;</span>: <span style=color:#c30>&#34;allow&#34;</span>,
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#309;font-weight:700>&#34;rules&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;id&#34;</span>: <span style=color:#c30>&#34;deny pub/sub&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;permission&#34;</span>: <span style=color:#c30>&#34;deny&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;flows&#34;</span>: [<span style=color:#c30>&#34;ingress&#34;</span>, <span style=color:#c30>&#34;egress&#34;</span>],
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;messages&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;declare_subscriber&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;put&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;delete&#34;</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;key_exprs&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;demo/example/**&#34;</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#309;font-weight:700>&#34;subjects&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;id&#34;</span>: <span style=color:#c30>&#34;example subject&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;interfaces&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;lo0&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;en0&#34;</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;cert_common_names&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;example.zenoh.io&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;usernames&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;zenoh-example1&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;zenoh-example2&#34;</span>,
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#309;font-weight:700>&#34;policies&#34;</span>: [
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;rules&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;deny pub/sub&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>        <span style=color:#309;font-weight:700>&#34;subjects&#34;</span>: [
</span></span><span style=display:flex><span>          <span style=color:#c30>&#34;example subject&#34;</span>
</span></span><span style=display:flex><span>        ],
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=rules>rules</h3><p>Each rule within the <code>rules</code> list is identified by a unique <code>id</code> string. Rules apply on matched messages based on their individual characteristics:</p><ul><li><code>messages</code>: types of messages to apply the rule on. Supported message types are the following:<ul><li>Pub/Sub messages:<ul><li>Declare Subscriber (<code>declare_subscriber</code>)</li><li>Publication (<code>put</code>)</li><li>Delete (<code>delete</code>)</li></ul></li><li>Queryable messages:<ul><li>Declare Queryable (<code>declare_queryable</code>)</li><li>Query (<code>query</code>)</li><li>Reply (<code>reply</code>)</li></ul></li><li>Liveliness messages (as of Zenoh v1.0.3):<ul><li>Liveliness Token (<code>liveliness_token</code>)</li><li>Declare Liveliness Subscriber (<code>declare_liveliness_subscriber</code>)</li><li>Liveliness Query (<code>liveliness_query</code>): note that its associated replies are <strong>Liveliness Token</strong> messages.</li></ul></li></ul></li><li><code>flows</code>: applies rule on incoming messages (<code>ingress</code>), outgoing messages (<code>egress</code>), or both directions. If this field is not provided in the config, the rule will apply to both directions by default.</li><li><code>key_exprs</code>: the rule applies on messages for which the key matches one of the given key expressions. For more details on key expression matching, see <a href=https://zenoh.io/docs/manual/abstractions/#key-expression>Key Expressions</a>.</li></ul><p>Matched messages are filtered based on the rule&rsquo;s <code>permission</code>: <code>allow</code> or <code>deny</code>.</p><p>For instance, the following rule denies all incoming and outgoing subscriptions, publications and deletions on key expressions matching <code>demo/example/**</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;id&#34;</span>: <span style=color:#c30>&#34;deny pub/sub&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;permission&#34;</span>: <span style=color:#c30>&#34;deny&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;flows&#34;</span>: [<span style=color:#c30>&#34;ingress&#34;</span>, <span style=color:#c30>&#34;egress&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;messages&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;declare_subscriber&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;put&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;delete&#34;</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;key_exprs&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;demo/example/**&#34;</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=subjects>subjects</h3><p>Each subject configuration is identified by a unique <code>id</code> string. Subject configuration combines <code>interfaces</code>, <code>cert_common_names</code> and <code>usernames</code> to match with configurations of connecting Zenoh instances.</p><ul><li><code>interfaces</code>: list of local network interfaces through which the configured instance communicates with the remote instance to be matched.</li><li><code>cert_common_names</code>: list of certificate common names which are matched with the respective certificate content of the remote instance using TLS or QUIC transport. For details on certificate configuration refer to <a href=../tls>TLS authentication</a> and <a href=../quic>QUIC transport</a>.</li><li><code>usernames</code>: list of usernames to be matched with the authentication config of remote instances. Refer to <a href=../user-password>User-Password authentication</a> for how to setup this authentication mechanism.</li></ul><p>To produce all possible combinations that characterize a subject configuration, the Cartesian product of the <code>interfaces</code>, <code>cert_common_names</code> and <code>usernames</code> lists is calculated. This allows for items within the same list to be considered a logical <code>OR</code>, and items across different lists to be considered a logical <code>AND</code>.
To demonstrate these logical combinations, below is an example of a subject configuration and its internal representation.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;id&#34;</span>: <span style=color:#c30>&#34;example subject&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;interfaces&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;lo0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;en0&#34;</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;cert_common_names&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;example.zenoh.io&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;usernames&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;zenoh-example1&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;zenoh-example2&#34;</span>,
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#09f;font-style:italic>// This instance translates internally to this filter:
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>  <span style=color:#09f;font-style:italic>// (interface=&#34;lo0&#34; AND cert_common_name=&#34;example.zenoh.io&#34; AND username=&#34;zenoh-example1&#34;) OR
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>  <span style=color:#09f;font-style:italic>// (interface=&#34;lo0&#34; AND cert_common_name=&#34;example.zenoh.io&#34; AND username=&#34;zenoh-example2&#34;) OR
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>  <span style=color:#09f;font-style:italic>// (interface=&#34;en0&#34; AND cert_common_name=&#34;example.zenoh.io&#34; AND username=&#34;zenoh-example1&#34;) OR
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>  <span style=color:#09f;font-style:italic>// (interface=&#34;en0&#34; AND cert_common_name=&#34;example.zenoh.io&#34; AND username=&#34;zenoh-example2&#34;)
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic></span>}
</span></span></code></pre></div><p>Note that any of the three lists presented above can be ommited, and will be interpreted as a wildcard (i.e matches with all possible values of that authentication method). This implies that the empty subject below is a wildcard that will match any Zenoh instance.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;id&#34;</span>: <span style=color:#c30>&#34;subject that matches all zenoh instances&#34;</span>,
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=policies>policies</h3><p>The <code>policies</code> list associates configured rules to configured subjects based on their unique <code>id</code>s. For example, the policy below applies the <code>deny pub/sub</code> rule on the <code>example subject</code> subject declared above. Note that in a policy object, <code>rules</code> and <code>subjects</code> are lists, which conveniently allows to apply multiple rules to multiple subjects within the same policy object.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;rules&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;deny pub/sub&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>  <span style=color:#309;font-weight:700>&#34;subjects&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#c30>&#34;example subject&#34;</span>
</span></span><span style=display:flex><span>  ],
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=guidelines-for-configuring-acl>Guidelines for configuring ACL</h2><p>Designing ACL policies can be quite the challenge, especially when considering the potential impact that a subomptimal configuration can have on performance.
For you convenience, we&rsquo;ve compiled below some guidelines and common mistakes to look out for when configuring ACL.</p><ul><li>The first step to consider is which of the two ACL models to use: set <code>"default_permission": "deny"</code> and define <code>allow</code> rules, or the opposite.
This choice can have an impact on performance if the number of rules to verify per message is too high.
Therefore, it is considered best practice in most cases to pick the model that yields the least amount of rules, with regards to your application and desired filters.</li><li>When defining subjects and applying rules on them, avoid having two different subjects that can match the same instance and have the same rule apply on them, as this could lead to a double verification of said rule in this case, which yields a loss in performance.</li><li>Defining rules that apply on both <code>ingress</code> and <code>egress</code> flows can cause a double verification of messages, which leads to performance loss.
Avoid defining rules that respectively apply on both flows, unless the affected messages are <em>generated</em> or <em>consumed</em> by the instance, and do not pass through it. Consider the following examples:<ul><li>A router receives <code>put</code> messages and routes them, which applies both of its matching <code>ingress</code> and <code>egress</code> rules on them.</li><li>A client running a subscriber receives and <em>consumes</em> <code>put</code> messages, only applying its matching <code>ingress</code> rules on them.</li><li>A client publisher <em>generates</em> <code>put</code> messages and so only applies its matching <code>egress</code> rules on them.</li><li>A client running both a publisher and a subscriber <em>generates</em> and <em>consumes</em> <code>put</code> messages,
but only applies either of its matching <code>ingress</code> or <code>egress</code> rules on each individual message.</li></ul></li><li>Depending on your rules, conflicting decisions on the same message can occur (<code>allow</code> and <code>deny</code> from different rules).
In this case, it is important to know decision priority to predict the outcome: <strong>explicit deny rule</strong> > <strong>explicit allow rule</strong> > <strong>default_permission rule</strong>.
For more details on decision priority, please refer to the <a href=https://github.com/eclipse-zenoh/roadmap/blob/main/rfcs/ALL/Access%20Control%20Rules.md#priority><em>Priority</em> section of the Access Control Rules RFC</a>.</li><li>Key expression matching when applying rules on messages can have a substantial impact on performance, depending on how the rules are constructed.
When possible, avoid using wildcards and DSL (eg: <code>"**"</code>, <code>"example/*"</code>, <code>"example/t$*"</code>) and prefer keys (eg: <code>example/test</code>) which are much faster to match.</li><li>Look out for supersets and partial overlap between rule key expressions and message key, which are not considered valid matches and therefore will not apply said ACL rule on said message.
For more details on this regard, please refer to the <a href=https://github.com/eclipse-zenoh/roadmap/blob/main/rfcs/ALL/Access%20Control%20Rules.md#key-expression-matching><em>Key-Expression Matching</em> section of the Access Control Rules RFC</a>.</li><li>When filtering queryable messages, keep in mind that a <code>reply</code> does not necessarily have the same key expression as its associated <code>query</code>.</li><li>As mentioned in message types above, a <code>liveliness_query</code> message will have <code>liveliness_token</code> messages as its associated replies, therefore it is important to set the rules applying to <code>liveliness_token</code> accordingly.</li><li>Bare in mind that the effectiveness of ACL policies is highly dependent of your Zenoh network topology and how much control you have over it. The topology can evolve in unpredictable ways in certain scenarios when combined with configuration options like <code>scouting</code> and <code>gossip</code>, which is complicated further when factoring the mobility of Zenoh clients in certain use-cases.</li></ul><hr><p>For a more technical analysis of the ACL feature, please refer to the <a href=https://github.com/eclipse-zenoh/roadmap/blob/main/rfcs/ALL/Access%20Control%20Rules.md>Access Control Rules RFC</a>.</p><div class=ato-next><b>Next up</b>: <a href=/docs/apis/rust/>Rust API</a></div></main></div></div><footer class="ato-footer text-muted"><div class="container-fluid p-6 p-md-5"><div class=row><div class=col-md-2><h5>Eclipse Incubation</h5><p><img src=../../../img/eclipse-incubation.png style=width:100px></p><p>Eclipse zenoh &trade; is an incubating project under the Eclipse Foundation.</p></div><div class=col-md-2><h5>More Information</h5><p><a href=https://www.eclipse.org/legal target=_blank>Legal</a></p><p><a href=https://www.eclipse.org/legal/privacy.php target=_blank>Privacy policy</a></p><p><a href=https://www.eclipse.org/legal/termsofuse.php target=_blank>Terms of use</a></p><p><a href=https://www.eclipse.org/legal/copyright.php target=_blank>Copyright</a></p><p><a href=https://www.eclipse.org/security/ target=_blank>Report a security issue</a></p><p><a href=https://www.eclipse.org/legal/epl-2.0/ target=_blank>Eclipse Public License 2.0</a></p><p><a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License 2.0</a></p><p><a href=https://www.eclipse.org/ target=_blank>Eclipse Foundation</a></p></div><div class=col-md-2><h5>Sponsored by:</h5><p><a href=https://www.eclipse.org target=_blank><img src=../../../img/eclipse-foundation.svg style=width:120px></a></p><p><a href=https://zettascale.tech target=_blank><img src=../../../img/zettascale-dark.svg style=width:120px></a></p></div><div class=col-md-2><h5>Follow us</h5><p><a href=https://github.com/eclipse-zenoh/zenoh><i class="fa fa-github" aria-hidden=true></i>
GitHub</a></p><p><a href=https://discord.gg/vSDSpqnbkm><i class="fa fa fa-comments-o" aria-hidden=true></i>
Discord</a></p><p><a href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q><i class="fa fa-youtube-play" aria-hidden=true></i> Youtube</a></p><p><a href=../../../docs/overview/what-is-zenoh><i class="fa fa-info-circle" aria-hidden=true></i> About</a></p></div><div class=col-md-2><p><img src=../../../img/zenoh-dragon-150x163.png style=width:45px></p><p>Eclipse zenoh &trade; is free, open source and always will be.</p><p>Copyright &copy 2022 Eclipse Foundation</p><p>Built with <a href=https://gohugo.io/ target=_blank>HUGO</a></p></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js integrity=sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7 crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js integrity=sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8 crossorigin=anonymous></script>
<script src=../../../js/bootstrap.min.js></script>
<script src=../../../js/highlight.min.js></script>
<script>$(function(){$("pre code").each(function(e,t){if(t.className.indexOf("language-rust")>=0){for(var s="",n=t.textContent.split(`
`),e=0;e<n.length;e++){if(n[e].indexOf("# ")==0||n[e]=="#")continue;s+=n[e].trimRight()+`
`}t.textContent=s.replace(/\n\n\n/g,`

`).trimRight()}hljs.highlightBlock(t)})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-PBD6MS51QL"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PBD6MS51QL",{anonymize_ip:!1})}</script></body></html>