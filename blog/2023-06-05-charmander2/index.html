<!doctype html><html lang=en><head><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.png><meta name=msapplication-TileImage content="/safari-pinned-tab.png"><meta name=msapplication-TileColor content="#7da7d8"><meta name=theme-color content="#7da7d8"><meta charset=utf-8><meta name=description content="Eclipse Zenoh, unify data in motion, data at rest and computations."><meta name=keywords content="pub/sub,query,geo distributed storage,Rust,protocol,DDS,MQTT,Edge,IoT,MEC"><meta name=author content="The Zenoh Team"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=../../css/bootstrap-reboot.css><link rel=stylesheet href=../../css/bootstrap.css><link rel=stylesheet href=../../css/font-awesome.min.css><link rel=stylesheet href=../../css/ato.css><link rel=stylesheet href=../../css/syntax.css><link rel=alternate type=application/rss+xml href=../../blog/index.xml><title>Zenoh Charmander Grows Stronger · Zenoh - pub/sub, geo distributed storage, query</title></head><body><header class="navbar-expand navbar-dark d-flex flex-column flex-md-row align-items-md-center ato-navbar"><div class="d-flex flex-row justify-content-between pl-2 pr-2"><a class=navbar-brand href=../../><img src=../../img/zenoh-dragon-bg-150x163.png class=align-middle alt></a>
<button class="btn btn-link d-md-none p-0" type=button data-toggle=collapse data-target=#ato-nav aria-controls=ato-nav aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><div class="ato-links collapse pl-4 pl-md-0" id=ato-nav><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item><a class=nav-link href=../../>Home</a></li><li class=nav-item><a class=nav-link href=../../docs/getting-started/first-app/>Documentation</a></li><li class=nav-item><a class=nav-link href=../../usecases/>Use Cases</a></li><li class=nav-item><a class=nav-link href=../../community/>Community</a></li><li class=nav-item><a class=nav-link href=../../adopters/>Adopters</a></li><li class=nav-item><a class=nav-link href=../../media/>Media</a></li><li class=nav-item><a class="nav-link active" href=../../blog/2025-04-14-zenoh-gozuryu/>Blog</a></li></ul></div><ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li class=nav-item><a class="nav-link p-2" href=https://github.com/eclipse-zenoh/zenoh target=_blank rel=noopener aria-label=GitHub><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64.0.0 114.61.0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34.0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49.0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75.0.0 21.49-6.88 70.4 26.24a242.65 242.65.0 01128.18.0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69.0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41.0 34.22-.31 61.83-.31 70.23.0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37.0 256 0z" fill="currentcolor" fill-rule="evenodd"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://twitter.com/zettascaletech target=_blank rel=noopener aria-label=Twitter><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false"><title>Twitter</title><path d="M160.83 416.32c193.2.0 298.92-160.22 298.92-298.92.0-4.51.0-9-.2-13.52A214 214 0 00512 49.38a212.93 212.93.0 01-60.44 16.6 105.7 105.7.0 0046.3-58.19 209 209 0 01-66.79 25.37 105.09 105.09.0 00-181.73 71.91 116.12 116.12.0 002.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48.0 0068 159.6a106.27 106.27.0 01-47.53-13.11v1.43a105.28 105.28.0 0084.21 103.06 105.67 105.67.0 01-47.33 1.84 105.06 105.06.0 0098.14 72.94A210.72 210.72.0 0125 370.84a202.17 202.17.0 01-25-1.43 298.85 298.85.0 00160.83 46.92" fill="currentcolor"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://discord.gg/2GJ958VuHs target=_blank rel=noopener aria-label=Discord><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Discord</title><path fill="currentcolor" d="M13.545 2.907a13.227 13.227.0 00-3.257-1.011.05.05.0 00-.052.025c-.141.25-.297.577-.406.833a12.19 12.19.0 00-3.658.0 8.258 8.258.0 00-.412-.833.051.051.0 00-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041.0 00-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276.0 003.995 2.02.05.05.0 00.056-.019c.308-.42.582-.863.818-1.329a.05.05.0 00-.01-.059.051.051.0 00-.018-.011 8.875 8.875.0 01-1.248-.595.05.05.0 01-.02-.066.051.051.0 01.015-.019c.084-.063.168-.129.248-.195a.05.05.0 01.051-.007c2.619 1.196 5.454 1.196 8.041.0a.052.052.0 01.053.007c.08.066.164.132.248.195a.051.051.0 01-.004.085 8.254 8.254.0 01-1.249.594.05.05.0 00-.03.03.052.052.0 00.003.041c.24.465.515.909.817 1.329a.05.05.0 00.056.019 13.235 13.235.0 004.001-2.02.049.049.0 00.021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034.0 00-.02-.019zm-8.198 7.307c-.789.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.45.73 1.438 1.613.0.888-.637 1.612-1.438 1.612zm5.316.0c-.788.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.451.73 1.438 1.613.0.888-.631 1.612-1.438 1.612z"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q target=_blank rel=noopener aria-label=Youtube><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Youtube</title><path fill="currentcolor" d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01.0 011.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007.0 01-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309.0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007.0 01-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82.082 9.716A31.4 31.4.0 010 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007.0 011.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788.0 017.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/></svg></a></li></ul><script async src="https://www.googletagmanager.com/gtag/js?id=G-PBD6MS51QL"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PBD6MS51QL")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":""},"articleSection":"blog","name":"Zenoh Charmander Grows Stronger","headline":"Zenoh Charmander Grows Stronger","datePublished":"2023-06-07 00:00:00 \u002b0000 UTC","dateModified":"2023-06-07 00:00:00 \u002b0000 UTC","url":"\/blog\/2023-06-05-charmander2\/","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"7077","wordCount":"1875","keywords":[],"description":"June 7th, 2023 -- Paris"}</script></header><div class="container-fluid ato-blog"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 ato-sidebar"><div class="ato-docs-toggle d-md-none p-0 d-flex ml-3 collapsed align-item-center"><h1 class=ato-title>Zenoh Charmander Grows Stronger</h1><button class="btn btn-link" type=button data-toggle=collapse data-target=#ato-docs-nav aria-controls=ato-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><nav class="ato-links collapse" id=ato-docs-nav><div class="ato-toc-item active"><p class=ato-toc-link>Blog Posts</p><ul class="nav ato-sidenav"><li><a href=../../blog/2025-04-14-zenoh-gozuryu/>Zenoh Gozuryū is Here!</a></li><li><a href=../../blog/2025-01-08-introducing-raspberry-pi-pico-support-in-zenoh-pico/>Introducing Raspberry Pi Pico Support in Zenoh-Pico</a></li><li><a href=../../blog/2024-12-12-zenoh-firesong-1.1.0/>Zenoh 1.1.0: Firesong Keeps Rocking 🎸</a></li><li><a href=../../blog/2024-10-21-zenoh-firesong/>Zenoh 1.0.0 "Firesong" is ready to rock!</a></li><li><a href=../../blog/2024-04-30-zenoh-electrode/>Zenoh 0.11.0 "Electrode" release is out!</a></li><li><a href=../../blog/2024-04-17-datadog-zenoh-router-integration/>Streamlining Zenoh router Monitoring with Datadog Integration</a></li><li><a href=../../blog/2024-01-31-zenoh-flow-getting-started/>Zenoh-Flow 0.6.0-rc: Getting Started</a></li><li><a href=../../blog/2023-10-03-zenoh-dragonite/>Zenoh Dragonite Took Off!</a></li><li><a href=../../blog/2023-07-17-s3-backend/>Zenoh Storage Gets a Boost: Empowering Storage with S3 Integration</a></li><li><a href=../../blog/2023-06-05-charmander2/>Zenoh Charmander Grows Stronger</a></li><li><a href=../../blog/2023-04-04-letsencrypt/>Securing Zenoh with LetsEncrypt: A Comprehensive Guide</a></li><li><a href=../../blog/2023-03-21-zenoh-vs-mqtt-kafka-dds/>Comparing the Performance of Zenoh, MQTT, Kafka, and DDS</a></li><li><a href=../../blog/2023-02-10-zenoh-flow/>Data Flow programming with Zenoh-Flow</a></li><li><a href=../../blog/2023-01-17-zenoh-wireshark/>The Blue Dragon meets the Wire’s Shark</a></li><li><a href=../../blog/2023-01-10-zenoh-charmander/>Zenoh Charmander is coming to town</a></li><li><a href=../../blog/2022-11-29-zenoh-alignment/>Keeping storages aligned in Zenoh</a></li><li><a href=../../blog/2022-09-30-zenoh-bahamut/>Zenoh Bahamut takes flight!</a></li><li><a href=../../blog/2022-08-12-zenoh-serial/>There is Land Besides IP: How to Cross It with Zenoh</a></li><li><a href=../../blog/2022-06-09-zenoh-pico-above-and-beyond/>Zenoh-Pico: Above and Beyond</a></li><li><a href=../../blog/2022-04-14-rust-async-eval/>A Performance Evaluation on Rust Asynchronous Frameworks</a></li><li><a href=../../blog/2022-03-30-zenoh-mobility/>Mobility, Latency and Energy saving</a></li><li><a href=../../blog/2022-02-08-dragonbot/>DragonBotOne Egg Hatching with Zenoh and Zenoh-Pico</a></li><li><a href=../../blog/2021-11-09-ros2-zenoh-pico/>ROS 2 and microcontrollers integration via Zenoh-pico</a></li><li><a href=../../blog/2021-10-04-zenoh-pico-guide/>Zenoh goes embedded with zenoh-pico</a></li><li><a href=../../blog/2021-09-28-iac-experiences-from-the-trenches/>Indy Autonomous Challenge (IAC): Experiences from the Trenches</a></li><li><a href=../../blog/2021-07-13-zenoh-performance-async/>Zenoh performance: a stroll in Rust async wonderland</a></li><li><a href=../../blog/2021-07-05-zenoh-overhead/>Zenoh overhead: a story from our community</a></li><li><a href=../../blog/2021-06-14-zenoh-reliability/>Zenoh Reliability, Scalability and Congestion Control</a></li><li><a href=../../blog/2021-04-28-ros2-integration/>Integrating ROS2 with Eclipse zenoh</a></li><li><a href=../../blog/2021-03-23-discovery/>Minimizing Discovery Overhead in ROS2</a></li><li><a href=../../blog/2020-10-08-aithusa/>Zenoh Aithusa Hatched Out!</a></li><li><a href=../../blog/2020-06-29-zenoh-tidings/>Zenoh Tidings</a></li><li><a href=../../blog/2020-01-01-zenohtude/>A Year Full of Zenoh</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 ato-toc"><div class=section-nav><nav id=TableOfContents><ul><li><a href=#c-api>C++ API</a></li><li><a href=#query-payload>Query payload</a></li><li><a href=#tls-updates>TLS updates</a></li><li><a href=#s3-backend-updates>S3 Backend updates</a></li><li><a href=#key-expression-trees-and-formatters>Key Expression Trees and Formatters</a></li><li><a href=#transport-protocol-whitelisting>Transport protocol whitelisting</a></li><li><a href=#ros1-bridge>ROS1 bridge</a></li><li><a href=#liveliness-support>Liveliness support</a></li><li><a href=#compression-experimental>Compression (experimental)</a></li></ul></nav></div></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 ato-content ato-docs"><h1 class=ato-title>Zenoh Charmander Grows Stronger</h1><p class=ato-date>June 7th, 2023 -- Paris</p><p>The new <a href=https://zenoh.io>Zenoh</a> Charmander 0.7.2-rc is out and comes with some aces up the sleeve! This patch release marks as stable the following APIs:</p><ul><li>C++ API</li><li>Query payload</li></ul><p>It introduces some new features:</p><ul><li>C++ API is now compatible with both zenoh-c and zenoh-pico</li><li>TLS supports now Let’s Encrypt and IP-based certificates</li><li>Key formatters</li><li>Transport protocol whitelisting</li></ul><p>It brings to life these experimental features:</p><ul><li>Zenoh and ROS1 bridge</li><li>Liveliness assertion</li><li>Transparent compression</li></ul><p>And it also comes with a load of various bug fixes and improvements.</p><h2 id=c-api>C++ API</h2><p><a href=https://zenoh.io/blog/2023-01-10-zenoh-charmander/#c-bindings>Zenoh Charmander 0.7.0-rc</a> introduced experimental support for <a href=https://zenoh.io/blog/2023-01-10-zenoh-charmander/#c-bindings>C++ bindings</a>, which are built on top of the Zenoh C API. This release introduces the support of <a href=https://github.com/eclipse-zenoh/zenoh-pico>zenoh-pico</a> in addition to the already supported <a href=https://github.com/eclipse-zenoh/zenoh-c>zenoh-c</a>. This means you can now write your Zenoh C++ application and run it on any embedded platform supported by <a href=https://github.com/eclipse-zenoh/zenoh-pico#zenoh-pico-native-c-library-for-constrained-devices>zenoh-pico</a>! You can check <a href=https://github.com/eclipse-zenoh/zenoh-cpp#library-usage>here</a> how to set up zenoh-cpp as a library and switch between zenoh-c and zenoh-pico.</p><p>Moreover, this release finally provides the full coverage of the Zenoh stable API, including shared memory support (see <a href=https://github.com/eclipse-zenoh/zenoh-c/blob/main/examples/z_pub_shm.c>C</a> and <a href=https://github.com/eclipse-zenoh/zenoh-cpp/blob/main/examples/zenohc/z_pub_shm.cxx>C++</a> examples). The build for zenoh C/C++ projects was also made simpler and more flexible. Now zenoh-c, zenoh-pico and zenoh-cpp can be directly included into the parent CMake project without installation - see examples <a href=https://github.com/eclipse-zenoh/zenoh-cpp/tree/main/examples/simple>here</a>. The full set of C++ examples is available <a href=https://github.com/eclipse-zenoh/zenoh-cpp/tree/main/examples/>here</a>.</p><p>Stay tuned for an upcoming, detailed blog post on the C++ API that will be published shortly.</p><h2 id=query-payload>Query payload</h2><p>The <a href=https://zenoh.io/blog/2023-01-10-zenoh-charmander/#query-payload>query payload API</a> has been marked stable and added to all Zenoh examples: in Rust (<a href=https://github.com/eclipse-zenoh/zenoh/blob/eca888b410a0afb1df939393d4a304b7f926cd5e/examples/examples/z_get.rs#L32>get</a> and <a href=https://github.com/eclipse-zenoh/zenoh/blob/eca888b410a0afb1df939393d4a304b7f926cd5e/examples/examples/z_queryable.rs#L49>queryable</a>), C (<a href=https://github.com/eclipse-zenoh/zenoh-c/blob/2779f7ac470b1557e6fd8fd0ebfd04002ee8db2c/examples/z_get.c#L60>get</a> and <a href=https://github.com/eclipse-zenoh/zenoh-c/blob/2779f7ac470b1557e6fd8fd0ebfd04002ee8db2c/examples/z_queryable.c#L32>queryable</a>), C++ (<a href=https://github.com/eclipse-zenoh/zenoh-cpp/blob/81e1a69693bb45d4f23236d769ff4f4ad74ddddb/examples/universal/z_get.cxx#L62>get</a> and <a href=https://github.com/eclipse-zenoh/zenoh-cpp/blob/81e1a69693bb45d4f23236d769ff4f4ad74ddddb/examples/universal/z_queryable.cxx#L75>queryable</a>), Python (<a href=https://github.com/eclipse-zenoh/zenoh-python/blob/78a3902316f0e99d593ff7a2013ef920e637fa60/examples/z_get.py#L82>get</a> and <a href=https://github.com/eclipse-zenoh/zenoh-python/blob/78a3902316f0e99d593ff7a2013ef920e637fa60/examples/z_queryable.py#L73>queryable</a>), and Zenoh-Pico (<a href=https://github.com/eclipse-zenoh/zenoh-pico/blob/main/examples/unix/c11/z_get.c>get</a> and <a href=https://github.com/eclipse-zenoh/zenoh-pico/blob/main/examples/unix/c11/z_queryable.c>queryable</a>). As a reminder, a query has now gained the possibility to carry some user payload that can be received and interpreted by the matching queryables. For example, you can now attach a picture to a query that is analyzed by a queryable running an object detection algorithm as shown in the figure below.</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/zenoh-queryable-example.png alt="Query payload" width=60% height=auto></figure><h2 id=tls-updates>TLS updates</h2><p>This release adds the support for <a href=https://letsencrypt.org/>Let’s Encrypt</a> TLS certificates in Zenoh. More information on how to use it, for example to set up a Zenoh router in the cloud with TLS support can be found in this <a href=https://zenoh.io/blog/2023-04-04-letsencrypt/>dedicated blog post</a>.</p><p>Moreover, the TLS library used by Zenoh (<a href=https://www.memorysafety.org/blog/rustls-new-features/>Rustls</a>) has finally added the support for TLS certificates based on IP addresses instead of DNS names. To test it out, it is enough to generate the TLS certificates according to <a href=https://zenoh.io/docs/manual/tls/#appendix-tls-certificates-creation>these instructions</a>.</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/zenoh-letsencrypt.png alt="Letsencrypt validation" width=60% height=auto></figure><h2 id=s3-backend-updates>S3 Backend updates</h2><p>This release also includes some updates for the S3 backend. The first version of the plugin already provided many functionalities, such as the communication between Zenoh and AWS S3 servers, compatibility with MinIO S3 instances, and TLS communication. However we were missing timestamp handling on our side, which could lead to some edge case concurrency issues. In this release we handle this problem.</p><h2 id=key-expression-trees-and-formatters>Key Expression Trees and Formatters</h2><p>With Zenoh 0.6, we introduced a new definition for Key Expressions (KE) to make them both faster and more predictable. Now introducing KeTrees and KeFormatters (Rust exclusive for now). A full blog post on both of these is coming soon, but in the meantime, here’s a quick sum-up.</p><p>KeTrees: it may be tempting to just put KE-value pairs into a hashmap and be done with it, but the reality is that you’re likely to lose the intersection/inclusion semantics of KEs when doing that. KeTrees are built to let you iterate on intersections between KEs as fast as possible.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span><span style=color:#069;font-weight:700>mut</span><span style=color:#bbb> </span>tree<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>KeBoxTree::new();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>tree.insert(keyexpr::new(<span style=color:#c30>&#34;a/b&#34;</span>).unwrap(),<span style=color:#bbb> </span><span style=color:#f60>1</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>tree.insert(keyexpr::new(<span style=color:#c30>&#34;a/c&#34;</span>).unwrap(),<span style=color:#bbb> </span><span style=color:#f60>2</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>tree.insert(keyexpr::new(<span style=color:#c30>&#34;b/c&#34;</span>).unwrap(),<span style=color:#bbb> </span><span style=color:#f60>3</span>);<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>intersection<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>tree.intersection(keyexpr::new(<span style=color:#c30>&#34;a/**&#34;</span>).unwrap());<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#09f;font-style:italic>// intersection is an iterator which will yield the nodes for &#34;a&#34;,
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// &#34;a/b&#34; and &#34;a/c&#34;, which will have weights `None`, `Some(1)` and `Some(2)`
</span></span></span><span style=display:flex><span><span style=color:#09f;font-style:italic>// respectively. The order isn&#39;t guaranteed.
</span></span></span></code></pre></div><p>KeFormatters: because KEs are Zenoh’s address-space, they’re a fairly important thing for your team to manage correctly. You’re likely to end up defining your address space in a manner similar to REST APIs. KeFormatters are here to help you manage this in 3 steps:</p><ul><li>Define a format: <code>zenoh::kedefine!(pub temperatures: "factory/temperature/sensor/-/${factory:*}/${sensor:*}");</code></li><li>Use it to construct KEs, letting the formatter ensure that you aren’t accidentally breaking your API (setting <code>factory = “5/42”</code> in the following example, for example, would cause an error.</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span><span style=color:#069;font-weight:700>mut</span><span style=color:#bbb> </span>formatter<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>temperatures::formatter();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>ke<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>zenoh::keformat<span style=color:#555>!</span>(formatter,<span style=color:#bbb> </span>factory<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span><span style=color:#f60>5</span>,<span style=color:#bbb> </span>sensor<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span><span style=color:#f60>42</span>).unwrap();<span style=color:#bbb>
</span></span></span></code></pre></div><ul><li>Or use it to parse incoming KEs to extract the informations you actually care about:</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=display:flex><span><span style=color:#069;font-weight:700>let</span><span style=color:#bbb> </span>parsed<span style=color:#bbb> </span><span style=color:#555>=</span><span style=color:#bbb> </span>temperatures::parse(ke).unwrap();<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>assert_eq!(parsed.factory(),<span style=color:#bbb> </span><span style=color:#366>Ok</span>(<span style=color:#c30>&#34;5&#34;</span>));<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span>assert_eq!(parsed.sensor(),<span style=color:#bbb> </span><span style=color:#366>Ok</span>(<span style=color:#c30>&#34;42&#34;</span>));<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=transport-protocol-whitelisting>Transport protocol whitelisting</h2><p>A new configuration option has been added in zenoh to allow only certain network protocols to be used by Zenoh. In order to understand what that means, we need to take a step back and see how Zenoh operates. Zenoh can work on various network protocols as shown in the figure below.</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/zenoh-stack.png alt="Zenoh stack" width=40% height=auto></figure><p>Depending on the use case and requirements, certain protocols may be preferred to others. E.g., we would like to force all the Zenoh communication to happen on TLS, which provides encryption, and not on TCP, which is less secure. In normal operation, Zenoh will try to connect via any available means to the other Zenoh nodes (e.g. peer or router). I.e., if a node supports multiple protocols (e.g. TCP, UDP, TLS), it will try any of those until it succeeds. However, in some cases it would be nice to limit the protocols to be used.</p><p>Until this release, the only way to disable certain protocols was to build Zenoh and disable them at compile time. This is clearly a tedious and long process that force the user to multiple builds just to support different combinations of required protocols. What about this release then? The newly introduced transport protocol whitelisting is now possible to configure at deployment time which protocols to enable via the Zenoh configuration. No more rebuilds needed! The figure below shows an example of a Zenoh peer who has configured only TLS as protocol whitelist and it will fail to connect to a Zenoh peer only offering TCP connectivity.</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/zenoh-whitelist-ip.png alt="IP whitelisting" width=60% height=auto></figure><p>Here below is an example of the configuration for the transport whitelisting.</p><pre tabindex=0><code>transport: {
    link: {
        /// An optional whitelist of protocols to be used for accepting and opening sessions.
        /// If not configured, all the supported protocols are automatically whitelisted.
        /// The supported protocols are: [&#34;tcp&#34; , &#34;udp&#34;, &#34;tls&#34;, &#34;quic&#34;, &#34;ws&#34;, &#34;unixsock-stream&#34;]
        /// For example, to only enable &#34;tls&#34; and &#34;quic&#34;:
        protocols: [&#34;tls&#34;, &#34;quic&#34;],
    }
}
</code></pre><h2 id=ros1-bridge>ROS1 bridge</h2><p><a href=https://wiki.ros.org>ROS1</a> is a very popular meta-operating system for robotics. It consists of the main core (peer-to-peer message exchange primitives, environment, broker - “rosmaster”, interface definition tools, package system) and numerous packages and tools providing extra capabilities built on top of the core: HAL, device drivers, components and algorithms collection etc.</p><p>A typical ROS1 system is a set of services communicating through some closed network and performing on different levels: from low-level hardware control (servo motors, sensors) and up to some high-level functionality (autopiloting, telemetry collection, parameter tuning, remote control etc).</p><p>Despite the fact that ROS1 operates on a peer-to-peer network, it is not designed to be ultimately scalable and leaves a lot of scalability problems to be solved by the user. In this condition, we believe that bridging ROS1 systems to Zenoh could do the trick, allowing ROS1 users to utilize all power of Zenoh in their solutions.</p><p><a href=https://github.com/eclipse-zenoh/zenoh-plugin-ros1>An alpha version of ROS1 to Zenoh bridge</a> is introduced in this release. This bridge is quite similar to the ROS2 bridge, but it offers some limited functionality for ROS1 systems. An example integration is shown on the following schema:</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/zenoh-ros1.png alt="Zenoh & Ros1" width=60% height=auto></figure><p>Capabilities:</p><ul><li>Bridging publishers, subscribers, services, clients</li><li>ROS1-to-ROS1 interaction support</li><li>ROS1-to-Zenoh interaction support</li></ul><p>ROS1 bridge has some limitations which, however, are planned to be completely eliminated in the nearest future:</p><ul><li>All topic names are bridged as-is</li><li>All topic data types and md5 sums are bridged as &ldquo;*&rdquo; wildcard and may not work with some ROS1 client implementations</li><li>Performance may be significantly improved, mainly by improving the Rust ROS1 bindings.</li><li>Supports only TCPROS protocol</li></ul><h2 id=liveliness-support>Liveliness support</h2><p>This release introduces the <em>liveliness</em> feature. It allows any Zenoh application to assert and monitor the liveliness of any other Zenoh application in the network. Zenoh applications can declare liveliness tokens associated with some key expressions. Liveliness tokens will be seen as <em>alive</em> by other Zenoh applications while the Zenoh application that declared it is <em>alive</em>.</p><p>Zenoh applications can query alive tokens with the <code>get_liveliness</code> function and subscribe to liveliness changes (apparition/disappearance of liveliness tokens) with the <code>declare_liveliness_subscriber</code> function.
This feature is only available in the Rust API and is marked <em>unstable</em>: it works as intended but the API may change in the future. More details can be found <a href=https://github.com/eclipse-zenoh/roadmap/blob/main/rfcs/ALL/Liveliness.md>here</a>. Examples can be found <a href=https://github.com/eclipse-zenoh/zenoh/blob/main/examples/examples/z_liveliness.rs>here</a>, <a href=https://github.com/eclipse-zenoh/zenoh/blob/main/examples/examples/z_get_liveliness.rs>here</a> and <a href=https://github.com/eclipse-zenoh/zenoh/blob/main/examples/examples/z_sub_liveliness.rs>here</a>.</p><h2 id=compression-experimental>Compression (experimental)</h2><p>An experimental transparent compression feature is added within this release, so far with promising results. The compression is performed hop to hop in the network, meaning that messages are compressed by the sending node and decompressed by the receiving node (a node being either a router, a client or a peer).</p><p>In order to enable the compression feature, Zenoh needs to be built enabling the “transparent_compression” and the “unstable” feature. Beware that for the moment, every node on the network needs to be built with those features if we want to have compressed communication even on a single link of the network. In the future we plan to add automatic negotiation for compression to support different configurations.</p><p>In the configuration file we can enable or disable the compression as shown below:</p><pre tabindex=0><code>{
 transport: {
   link: {
     compression: {
       enabled: true,
     },
   },
 },
}
</code></pre><p>So far the metrics collected on a local environment show promising results. By running the <a href=https://github.com/eclipse-zenoh/zenoh/tree/main/examples#z_pub_thr--z_sub_thr>z_pub_thr & z_sub_thr tests</a> (which allow us to measure the amount of messages sent per second through Zenoh) on a local environment composed of a Mac with an M2 processor, we see that even for a worst case scenario with batches containing high entropy payloads (resulting in a low compression rate), the amount of messages per second sent through the Zenoh network behaves as well as in the case compression is disabled.</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/compressions_2.png alt="Average messages per second depending on their size with and without compression. (Apple M2 CPU)" width=60% height=auto></figure><p>However, it’s in terms of size that we notice the biggest difference. In the worst case scenario we end up sending batches with the same size as the original batch, while for a best case scenario (for low entropy batches with high compression rate) then the gain in size is huge! A 64KB batch is reduced to a couple hundred bytes.</p><figure class=figure-inline><img src=../../img/20230605-blog-zenoh-charmander2/compressions_1.png alt="Sizes of compressed messages in bytes with high and low entropies, compared to non compressed ones." width=60% height=auto></figure><p>Of course, in terms of entropy for the batches, in real life most of the time we will deal with something in between the best and worst case scenario. We can expect that the gain in size will not be as optimal as in the best case scenario but the transparent compression feature will cause a considerable gain anyway, reducing the bandwidth needed to send messages through the network.</p><h1 id=whats-next><strong>What’s next?</strong></h1><p>Are you ready to keep rocking with Zenoh?</p><p><img src=../../img/20220930-blog-zenoh-bahamut/zenoh-on-fire.gif alt="Zenoh rocks"></p><p>These are the cool features you can expect for the months to come:</p><ul><li>An improved shared memory support</li><li>Kotlin Android API</li><li>A multicast transport</li></ul><p>And many other cool things…</p><p>And don’t forget to stay in touch with the Zenoh team on <a href=https://discord.gg/vSDSpqnbkm>Discord</a> and to propose new features on the <a href=https://github.com/eclipse-zenoh/roadmap/discussions>roadmap</a>.</p><p><a href=https://github.com/orgs/eclipse-zenoh/people>–The Zenoh Team</a></p><div class=ato-next><b>Next up</b>: <a href=../../blog/2023-04-04-letsencrypt/>Securing Zenoh with LetsEncrypt: A Comprehensive Guide</a></div></main></div></div><footer class="ato-footer text-muted"><div class="container-fluid p-6 p-md-5"><div class=row><div class=col-md-2><h5>Eclipse Incubation</h5><p><img src=../../img/eclipse-incubation.png style=width:100px></p><p>Eclipse zenoh &trade; is an incubating project under the Eclipse Foundation.</p></div><div class=col-md-2><h5>More Information</h5><p><a href=https://www.eclipse.org/legal target=_blank>Legal</a></p><p><a href=https://www.eclipse.org/legal/privacy.php target=_blank>Privacy policy</a></p><p><a href=https://www.eclipse.org/legal/termsofuse.php target=_blank>Terms of use</a></p><p><a href=https://www.eclipse.org/legal/copyright.php target=_blank>Copyright</a></p><p><a href=https://www.eclipse.org/security/ target=_blank>Report a security issue</a></p><p><a href=https://www.eclipse.org/legal/epl-2.0/ target=_blank>Eclipse Public License 2.0</a></p><p><a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License 2.0</a></p><p><a href=https://www.eclipse.org/ target=_blank>Eclipse Foundation</a></p></div><div class=col-md-2><h5>Sponsored by:</h5><p><a href=https://www.eclipse.org target=_blank><img src=../../img/eclipse-foundation.svg style=width:120px></a></p><p><a href=https://zettascale.tech target=_blank><img src=../../img/zettascale-dark.svg style=width:120px></a></p></div><div class=col-md-2><h5>Follow us</h5><p><a href=https://github.com/eclipse-zenoh/zenoh><i class="fa fa-github" aria-hidden=true></i>
GitHub</a></p><p><a href=https://discord.gg/vSDSpqnbkm><i class="fa fa fa-comments-o" aria-hidden=true></i>
Discord</a></p><p><a href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q><i class="fa fa-youtube-play" aria-hidden=true></i> Youtube</a></p><p><a href=../../docs/overview/what-is-zenoh><i class="fa fa-info-circle" aria-hidden=true></i> About</a></p></div><div class=col-md-2><p><img src=../../img/zenoh-dragon-150x163.png style=width:45px></p><p>Eclipse zenoh &trade; is free, open source and always will be.</p><p>Copyright &copy 2022 Eclipse Foundation</p><p>Built with <a href=https://gohugo.io/ target=_blank>HUGO</a></p></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js integrity=sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7 crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js integrity=sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8 crossorigin=anonymous></script>
<script src=../../js/bootstrap.min.js></script>
<script src=../../js/highlight.min.js></script>
<script>$(function(){$("pre code").each(function(e,t){if(t.className.indexOf("language-rust")>=0){for(var s="",n=t.textContent.split(`
`),e=0;e<n.length;e++){if(n[e].indexOf("# ")==0||n[e]=="#")continue;s+=n[e].trimRight()+`
`}t.textContent=s.replace(/\n\n\n/g,`

`).trimRight()}hljs.highlightBlock(t)})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-PBD6MS51QL"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PBD6MS51QL",{anonymize_ip:!1})}</script></body></html>