<!doctype html><html lang=en><head><link rel=apple-touch-icon sizes=180x180 href=../../apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=../../favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=../../favicon-16x16.png><link rel=manifest href=../../site.webmanifest><link rel=mask-icon href=../../safari-pinned-tab.png><meta name=msapplication-TileImage content="/safari-pinned-tab.png"><meta name=msapplication-TileColor content="#7da7d8"><meta name=theme-color content="#7da7d8"><meta charset=utf-8><meta name=description content="Eclipse Zenoh, unify data in motion, data at rest and computations."><meta name=keywords content="pub/sub,query,geo distributed storage,Rust,protocol,DDS,MQTT,Edge,IoT,MEC"><meta name=author content="The Zenoh Team"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=../../css/bootstrap-reboot.css><link rel=stylesheet href=../../css/bootstrap.css><link rel=stylesheet href=../../css/font-awesome.min.css><link rel=stylesheet href=../../css/ato.css><link rel=stylesheet href=../../css/syntax.css><link rel=alternate type=application/rss+xml href=../../blog/index.xml><title>Zenoh Charmander is coming to town · Zenoh - pub/sub, geo distributed storage, query</title></head><body><header class="navbar-expand navbar-dark d-flex flex-column flex-md-row align-items-md-center ato-navbar"><div class="d-flex flex-row justify-content-between pl-2 pr-2"><a class=navbar-brand href=../../><img src=../../img/zenoh-dragon-bg-150x163.png class=align-middle alt></a>
<button class="btn btn-link d-md-none p-0" type=button data-toggle=collapse data-target=#ato-nav aria-controls=ato-nav aria-expanded=false aria-label="Toggle navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><div class="ato-links collapse pl-4 pl-md-0" id=ato-nav><ul class="navbar-nav flex-column flex-md-row"><li class=nav-item><a class=nav-link href=../../>Home</a></li><li class=nav-item><a class=nav-link href=../../docs/getting-started/first-app/>Documentation</a></li><li class=nav-item><a class=nav-link href=../../usecases/>Use Cases</a></li><li class=nav-item><a class=nav-link href=../../community/>Community</a></li><li class=nav-item><a class=nav-link href=../../adopters/>Adopters</a></li><li class=nav-item><a class=nav-link href=../../media/>Media</a></li><li class=nav-item><a class="nav-link active" href=../../blog/2023-03-21-zenoh-vs-mqtt-kafka-dds/>Blog</a></li></ul></div><ul class="navbar-nav flex-row ml-md-auto d-none d-md-flex"><li class=nav-item><a class="nav-link p-2" href=https://github.com/eclipse-zenoh/zenoh target=_blank rel=noopener aria-label=GitHub><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 499.36" focusable="false"><title>GitHub</title><path d="M256 0C114.64.0.0 114.61.0 256c0 113.09 73.34 209 175.08 242.9 12.8 2.35 17.47-5.56 17.47-12.34.0-6.08-.22-22.18-.35-43.54-71.2 15.49-86.2-34.34-86.2-34.34-11.64-29.57-28.42-37.45-28.42-37.45-23.27-15.84 1.73-15.55 1.73-15.55 25.69 1.81 39.21 26.38 39.21 26.38 22.84 39.12 59.92 27.82 74.5 21.27 2.33-16.54 8.94-27.82 16.25-34.22-56.84-6.43-116.6-28.43-116.6-126.49.0-27.95 10-50.8 26.35-68.69-2.63-6.48-11.42-32.5 2.51-67.75.0.0 21.49-6.88 70.4 26.24a242.65 242.65.0 01128.18.0c48.87-33.13 70.33-26.24 70.33-26.24 14 35.25 5.18 61.27 2.55 67.75 16.41 17.9 26.31 40.75 26.31 68.69.0 98.35-59.85 120-116.88 126.32 9.19 7.9 17.38 23.53 17.38 47.41.0 34.22-.31 61.83-.31 70.23.0 6.85 4.61 14.81 17.6 12.31C438.72 464.97 512 369.08 512 256.02 512 114.62 397.37.0 256 0z" fill="currentcolor" fill-rule="evenodd"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://twitter.com/zettascaletech target=_blank rel=noopener aria-label=Twitter><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 512 416.32" focusable="false"><title>Twitter</title><path d="M160.83 416.32c193.2.0 298.92-160.22 298.92-298.92.0-4.51.0-9-.2-13.52A214 214 0 00512 49.38a212.93 212.93.0 01-60.44 16.6 105.7 105.7.0 0046.3-58.19 209 209 0 01-66.79 25.37 105.09 105.09.0 00-181.73 71.91 116.12 116.12.0 002.66 24c-87.28-4.3-164.73-46.3-216.56-109.82A105.48 105.48.0 0068 159.6a106.27 106.27.0 01-47.53-13.11v1.43a105.28 105.28.0 0084.21 103.06 105.67 105.67.0 01-47.33 1.84 105.06 105.06.0 0098.14 72.94A210.72 210.72.0 0125 370.84a202.17 202.17.0 01-25-1.43 298.85 298.85.0 00160.83 46.92" fill="currentcolor"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://discord.gg/2GJ958VuHs target=_blank rel=noopener aria-label=Discord><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Discord</title><path fill="currentcolor" d="M13.545 2.907a13.227 13.227.0 00-3.257-1.011.05.05.0 00-.052.025c-.141.25-.297.577-.406.833a12.19 12.19.0 00-3.658.0 8.258 8.258.0 00-.412-.833.051.051.0 00-.052-.025c-1.125.194-2.22.534-3.257 1.011a.041.041.0 00-.021.018C.356 6.024-.213 9.047.066 12.032c.001.014.01.028.021.037a13.276 13.276.0 003.995 2.02.05.05.0 00.056-.019c.308-.42.582-.863.818-1.329a.05.05.0 00-.01-.059.051.051.0 00-.018-.011 8.875 8.875.0 01-1.248-.595.05.05.0 01-.02-.066.051.051.0 01.015-.019c.084-.063.168-.129.248-.195a.05.05.0 01.051-.007c2.619 1.196 5.454 1.196 8.041.0a.052.052.0 01.053.007c.08.066.164.132.248.195a.051.051.0 01-.004.085 8.254 8.254.0 01-1.249.594.05.05.0 00-.03.03.052.052.0 00.003.041c.24.465.515.909.817 1.329a.05.05.0 00.056.019 13.235 13.235.0 004.001-2.02.049.049.0 00.021-.037c.334-3.451-.559-6.449-2.366-9.106a.034.034.0 00-.02-.019zm-8.198 7.307c-.789.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.45.73 1.438 1.613.0.888-.637 1.612-1.438 1.612zm5.316.0c-.788.0-1.438-.724-1.438-1.612.0-.889.637-1.613 1.438-1.613.807.0 1.451.73 1.438 1.613.0.888-.631 1.612-1.438 1.612z"/></svg></a></li><li class=nav-item><a class="nav-link p-2" href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q target=_blank rel=noopener aria-label=Youtube><svg class="navbar-nav-svg" xmlns="http://www.w3.org/2000/svg" focusable="false"><title>Youtube</title><path fill="currentcolor" d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01.0 011.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.007 2.007.0 01-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309.0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.007 2.007.0 01-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82.082 9.716A31.4 31.4.0 010 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.007 2.007.0 011.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A99.788 99.788.0 017.858 2h.193zM6.4 5.209v4.818l4.157-2.408L6.4 5.209z"/></svg></a></li></ul><script async src="https://www.googletagmanager.com/gtag/js?id=UA-120904581-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-41082619-2")</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":""},"articleSection":"blog","name":"Zenoh Charmander is coming to town","headline":"Zenoh Charmander is coming to town","datePublished":"2023-01-10 00:00:00 \u002b0000 UTC","dateModified":"2023-01-10 00:00:00 \u002b0000 UTC","url":"\/blog\/2023-01-10-zenoh-charmander\/","inLanguage":"en-US","author":"","creator":"","publisher":"","accountablePerson":"","copyrightHolder":"","copyrightYear":"101010","wordCount":"1036","keywords":[],"description":"10 January 2023 -- Paris."}</script></header><div class="container-fluid ato-blog"><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 ato-sidebar"><div class="ato-docs-toggle d-md-none p-0 d-flex ml-3 collapsed align-item-center"><h1 class=ato-title>Zenoh Charmander is coming to town</h1><button class="btn btn-link" type=button data-toggle=collapse data-target=#ato-docs-nav aria-controls=ato-docs-nav aria-expanded=false aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"/></svg></button></div><nav class="ato-links collapse" id=ato-docs-nav><div class="ato-toc-item active"><p class=ato-toc-link>Blog Posts</p><ul class="nav ato-sidenav"><li><a href=../../blog/2023-03-21-zenoh-vs-mqtt-kafka-dds/>Performance Comparison of Zenoh with MQTT, Kafka, and DDS</a></li><li><a href=../../blog/2023-02-10-zenoh-flow/>Data Flow programming with Zenoh-Flow</a></li><li><a href=../../blog/2023-01-17-zenoh-wireshark/>The Blue Dragon meets the Wire’s Shark</a></li><li><a href=../../blog/2023-01-10-zenoh-charmander/>Zenoh Charmander is coming to town</a></li><li><a href=../../blog/2022-11-29-zenoh-alignment/>Keeping storages aligned in Zenoh</a></li><li><a href=../../blog/2022-09-30-zenoh-bahamut/>Zenoh Bahamut takes flight!</a></li><li><a href=../../blog/2022-08-12-zenoh-serial/>There is Land Besides IP: How to Cross It with Zenoh</a></li><li><a href=../../blog/2022-06-09-zenoh-pico-above-and-beyond/>Zenoh-Pico: Above and Beyond</a></li><li><a href=../../blog/2022-04-14-rust-async-eval/>A Performance Evaluation on Rust Asynchronous Frameworks</a></li><li><a href=../../blog/2022-03-30-zenoh-mobility/>Mobility, Latency and Energy saving</a></li><li><a href=../../blog/2022-02-08-dragonbot/>DragonBotOne Egg Hatching with Zenoh and Zenoh-Pico</a></li><li><a href=../../blog/2021-11-09-ros2-zenoh-pico/>ROS 2 and microcontrollers integration via Zenoh-pico</a></li><li><a href=../../blog/2021-10-04-zenoh-pico-guide/>Zenoh goes embedded with zenoh-pico</a></li><li><a href=../../blog/2021-09-28-iac-experiences-from-the-trenches/>Indy Autonomous Challenge (IAC): Experiences from the Trenches</a></li><li><a href=../../blog/2021-07-13-zenoh-performance-async/>Zenoh performance: a stroll in Rust async wonderland</a></li><li><a href=../../blog/2021-07-05-zenoh-overhead/>Zenoh overhead: a story from our community</a></li><li><a href=../../blog/2021-06-14-zenoh-reliability/>Zenoh Reliability, Scalability and Congestion Control</a></li><li><a href=../../blog/2021-04-28-ros2-integration/>Integrating ROS2 with Eclipse zenoh</a></li><li><a href=../../blog/2021-03-23-discovery/>Minimizing Discovery Overhead in ROS2</a></li><li><a href=../../blog/2020-10-08-aithusa/>Zenoh Aithusa Hatched Out!</a></li><li><a href=../../blog/2020-06-29-zenoh-tidings/>Zenoh Tidings</a></li><li><a href=../../blog/2020-01-01-zenohtude/>A Year Full of Zenoh</a></li></ul></div></nav></div><div class="d-none d-xl-block col-xl-2 ato-toc"><div class=section-nav><nav id=TableOfContents></nav></div></div><main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 ato-content ato-docs"><h1 class=ato-title>Zenoh Charmander is coming to town</h1><p class=ato-date>10 January 2023 -- Paris.</p><p>The new <a href=https://github.com/eclipse-zenoh/zenoh/releases/tag/0.7.0-rc>Zenoh 0.7.0 release</a>, codename Charmander, brings to the table many features requested by the community on the <a href=https://discord.gg/2GJ958VuHs>Zenoh’s Discord server</a>.
Charmander introduces some long-awaited functionalities:</p><ul><li><a href=#mutual-tls-authentication>Mutual TLS authentication</a>;</li><li><a href=#mqtt-plugin>MQTT plugin</a>;</li><li><a href=#s3-storage-backend>S3 storage backend</a>;</li></ul><p>some new freshly-landed functionalities:</p><ul><li><a href=#query-payload>Query payload</a>;</li><li><a href=#c-bindings>C++ binding</a>;</li><li><a href=#connectivity-status-and-notifications>Connectivity status and notifications</a>;</li></ul><p>and <a href=#zenoh-pico-and-misra-c>MISRA-C compliance for Zenoh-Pico</a>.</p><hr><h1 id=mutual-tls-authentication>Mutual TLS authentication</h1><p>Until now, Zenoh was only supporting server-based authentication.
That is the kind of authentication you experience when surfing the web using HTTPS: your browser verifies if the server it is connecting to is legit, but the server does not authenticate your browser.
That’s why you need to use the user and password if you want to authenticate to the service itself.
In Zenoh, it was the same until now as shown in the figure below.
As a client or peer you could verify the authenticity of the router by using <a href=https://zenoh.io/docs/manual/tls/>TLS</a>, but then the router would use <a href=https://zenoh.io/docs/manual/user-password/>user and password authentication</a> to validate the clients, peers as well as other routers.</p><p><img src=../../img/20220922-blog-zenoh-charmander/tls1.png alt="TLS - Server authentication"></p><p>Mutual TLS (mTLS) authentication allows the router to authenticate incoming TLS connections from clients, peers, or other routers as shown in the figure below.
In this case, you will no longer need to use user and password authentication!
You can <a href=https://zenoh.io/docs/manual/tls/#mutual-authentication-mtls>check here</a> how to configure mTLS.</p><p><img src=../../img/20220922-blog-zenoh-charmander/tls2.png alt="TLS - Server authentication"></p><hr><h1 id=mqtt-plugin>MQTT plugin</h1><p>A <a href=https://github.com/eclipse-zenoh/zenoh-plugin-mqtt>new plugin</a> is coming into the dragon nest that enables integrating Zenoh with MQTT.
This is a fresh addition to the already existing <a href=https://github.com/eclipse-zenoh/zenoh-plugin-dds>DDS plugin</a>, <a href=https://github.com/eclipse-zenoh/zenoh/tree/master/plugins/zenoh-plugin-rest>REST plugin</a>, and <a href=https://github.com/eclipse-zenoh/zenoh-plugin-webserver>web server plugin</a>.
The <a href=https://github.com/eclipse-zenoh/zenoh-plugin-mqtt>Zenoh MQTT plugin</a> converts a Zenoh router into a full-fledged MQTT broker supporting MQTT V3 and V5 clients.
This allows to exploit all the Zenoh routing and storage capabilities from your MQTT client, but also to make Zenoh clients and peers talk with MQTT clients as shown in the figure below!
To test it out just follow the <a href=https://github.com/eclipse-zenoh/zenoh-plugin-mqtt>README</a>.</p><p><img src=../../img/20220922-blog-zenoh-charmander/mqtt.png alt="MQTT plugin"></p><hr><h1 id=s3-storage-backend>S3 storage backend</h1><p>Speaking of Zenoh storage capabilities, <a href=https://github.com/eclipse-zenoh/zenoh-backend-s3>S3 storage backend</a> has just landed.
It can be used with S3-like storage like <a href=https://aws.amazon.com/s3/>Amazon S3</a> and <a href=https://min.io/>MinIO</a>.
This allows you to plug S3 buckets into the Zenoh infrastructure and start storing and retrieving data from there.
To test it out just follow the <a href=https://github.com/eclipse-zenoh/zenoh-backend-s3>README</a>.</p><p><img src=../../img/20220922-blog-zenoh-charmander/s3.png alt="S3 storage backend"></p><hr><h1 id=query-payload>Query payload</h1><p>Zenoh has gained the possibility to attach some user payload when issuing a query.
This simplifies and makes it more efficient for an application to pass information, such as arguments or body, in the query that can be received and interpreted by the matching queryables.
For example, you can now attach a picture to a query that is analyzed by a queryable running an object detection algorithm as shown in the figure below.</p><p><img src=../../img/20220922-blog-zenoh-charmander/query.png alt="Query payload"></p><p>Here below is an example written in Python.</p><p><strong>Query</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>zenoh</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>session <span style=color:#555>=</span> zenoh<span style=color:#555>.</span>open(zenoh<span style=color:#555>.</span>Config())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>in_file <span style=color:#555>=</span> <span style=color:#366>open</span>(<span style=color:#c30>&#34;zenoh-logo.png&#34;</span>, <span style=color:#c30>&#34;rb&#34;</span>)
</span></span><span style=display:flex><span>picture <span style=color:#555>=</span> in_file<span style=color:#555>.</span>read()
</span></span><span style=display:flex><span>in_file<span style=color:#555>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>replies <span style=color:#555>=</span> session<span style=color:#555>.</span>get(<span style=color:#c30>&#34;analyze/picture&#34;</span>, zenoh<span style=color:#555>.</span>Queue(), value<span style=color:#555>=</span>picture)
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>for</span> reply <span style=color:#000;font-weight:700>in</span> replies<span style=color:#555>.</span>receiver:
</span></span><span style=display:flex><span>        <span style=color:#366>print</span>(<span style=color:#c30>&#34;</span><span style=color:#a00>{}</span><span style=color:#c30>&#34;</span><span style=color:#555>.</span>format(reply<span style=color:#555>.</span>ok<span style=color:#555>.</span>payload<span style=color:#555>.</span>decode(<span style=color:#c30>&#34;utf-8&#34;</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>session<span style=color:#555>.</span>close()
</span></span></code></pre></div><p><strong>Queryable</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#09f;font-style:italic># Query</span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>zenoh</span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>import</span> <span style=color:#0cf;font-weight:700>time</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>key <span style=color:#555>=</span> <span style=color:#c30>&#34;analyze/picture&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>def</span> <span style=color:#c0f>callback</span>(query):
</span></span><span style=display:flex><span>    <span style=color:#09f;font-style:italic># analyze the picture in &#34;query.value.payload&#34;</span>
</span></span><span style=display:flex><span>    value <span style=color:#555>=</span> <span style=color:#c30>&#34;It’s a dragon&#34;</span>
</span></span><span style=display:flex><span>    query<span style=color:#555>.</span>reply(zenoh<span style=color:#555>.</span>Sample(key, value))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>session <span style=color:#555>=</span> zenoh<span style=color:#555>.</span>open(zenoh<span style=color:#555>.</span>Config())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>queryable <span style=color:#555>=</span> session<span style=color:#555>.</span>declare_queryable(key, callback)
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>while</span> <span style=color:#069;font-weight:700>True</span>:
</span></span><span style=display:flex><span>    time<span style=color:#555>.</span>sleep(<span style=color:#f60>1</span>)
</span></span></code></pre></div><p>Don’t forget to check out all the other examples for <a href=https://github.com/eclipse-zenoh/zenoh/tree/master/examples>Rust</a>, <a href=https://github.com/eclipse-zenoh/zenoh-python/tree/master/examples>Python</a>, and <a href=https://github.com/eclipse-zenoh/zenoh-c/tree/master/examples>C</a>.</p><hr><h1 id=c-bindings>C++ bindings</h1><p>Hey, did someone say <a href=https://github.com/eclipse-zenoh/zenoh-cpp>C++</a>? Yes!
This is the <a href=https://github.com/eclipse-zenoh/zenoh-cpp>new binding</a> that has just arrived in the Zenoh world.
You can find it <a href=https://github.com/eclipse-zenoh/zenoh-cpp>here</a> and start testing it out.</p><p>C++ bindings are built on top of the C API and for this release they are fully based on <a href=https://github.com/eclipse-zenoh/zenoh-c>zenoh-c</a>.
This allows you to start developing C++ Zenoh applications in your usual desktop/server environment.
Here below you is a pub/sub example, while the full set of C++ examples is available <a href=https://github.com/eclipse-zenoh/zenoh-cpp/tree/main/examples/cpp>here</a>.</p><p><strong>Pub</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&lt;iostream&gt;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&#34;stdio.h&#34;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&#34;zenohcpp.h&#34;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099></span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>using</span> <span style=color:#069;font-weight:700>namespace</span> zenoh;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#078;font-weight:700>int</span> <span style=color:#c0f>main</span>(<span style=color:#078;font-weight:700>int</span> argc, <span style=color:#078;font-weight:700>char</span> <span style=color:#555>**</span>argv) {
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>const</span> <span style=color:#078;font-weight:700>char</span> <span style=color:#555>*</span>keyexpr <span style=color:#555>=</span> <span style=color:#c30>&#34;demo/example/zenoh-cpp-pub&#34;</span>;
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>const</span> <span style=color:#078;font-weight:700>char</span> <span style=color:#555>*</span>value <span style=color:#555>=</span> <span style=color:#c30>&#34;Pub from CPP!&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Config config;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>auto</span> session <span style=color:#555>=</span> std<span style=color:#555>::</span>get<span style=color:#555>&lt;</span>Session<span style=color:#555>&gt;</span>(open(std<span style=color:#555>::</span>move(config)));
</span></span><span style=display:flex><span>    PutOptions options;
</span></span><span style=display:flex><span>    options.set_encoding(Z_ENCODING_PREFIX_TEXT_PLAIN);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>if</span> (<span style=color:#555>!</span>session.put(keyexpr, value, options)) {
</span></span><span style=display:flex><span>        printf(<span style=color:#c30>&#34;Put failed...</span><span style=color:#c30;font-weight:700>\n</span><span style=color:#c30>&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>return</span> <span style=color:#f60>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Sub</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-cpp data-lang=cpp><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&lt;stdio.h&gt;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&lt;unistd.h&gt;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&lt;iostream&gt;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099>#include</span> <span style=color:#099>&#34;zenohcpp.h&#34;</span><span style=color:#099>
</span></span></span><span style=display:flex><span><span style=color:#099></span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>using</span> <span style=color:#069;font-weight:700>namespace</span> zenoh;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#069;font-weight:700>const</span> <span style=color:#078;font-weight:700>char</span> <span style=color:#555>*</span><span style=color:#c0f>kind_to_str</span>(z_sample_kind_t kind) {
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>switch</span> (kind) {
</span></span><span style=display:flex><span>        <span style=color:#069;font-weight:700>case</span> <span style=color:#99f>Z_SAMPLE_KIND_PUT</span>:
</span></span><span style=display:flex><span>            <span style=color:#069;font-weight:700>return</span> <span style=color:#c30>&#34;PUT&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#069;font-weight:700>case</span> <span style=color:#99f>Z_SAMPLE_KIND_DELETE</span>:
</span></span><span style=display:flex><span>            <span style=color:#069;font-weight:700>return</span> <span style=color:#c30>&#34;DELETE&#34;</span>;
</span></span><span style=display:flex><span>        <span style=color:#069;font-weight:700>default</span><span style=color:#555>:</span>
</span></span><span style=display:flex><span>            <span style=color:#069;font-weight:700>return</span> <span style=color:#c30>&#34;UNKNOWN&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#078;font-weight:700>void</span> <span style=color:#c0f>data_handler</span>(<span style=color:#069;font-weight:700>const</span> Sample <span style=color:#555>*</span>sample) {
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>if</span> (sample) {
</span></span><span style=display:flex><span>        std<span style=color:#555>::</span>cout <span style=color:#555>&lt;&lt;</span> <span style=color:#c30>&#34;&gt;&gt; [Subscriber] Received &#34;</span> <span style=color:#555>&lt;&lt;</span> kind_to_str(sample<span style=color:#555>-&gt;</span>get_kind()) <span style=color:#555>&lt;&lt;</span> <span style=color:#c30>&#34; (&#39;&#34;</span>
</span></span><span style=display:flex><span>                  <span style=color:#555>&lt;&lt;</span> sample<span style=color:#555>-&gt;</span>get_keyexpr().as_string_view() <span style=color:#555>&lt;&lt;</span> <span style=color:#c30>&#34;&#39; : &#39;&#34;</span> <span style=color:#555>&lt;&lt;</span> sample<span style=color:#555>-&gt;</span>get_payload().as_string_view()
</span></span><span style=display:flex><span>                  <span style=color:#555>&lt;&lt;</span> <span style=color:#c30>&#34;&#39;)</span><span style=color:#c30;font-weight:700>\n</span><span style=color:#c30>&#34;</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#078;font-weight:700>int</span> <span style=color:#c0f>main</span>(<span style=color:#078;font-weight:700>int</span> argc, <span style=color:#078;font-weight:700>char</span> <span style=color:#555>**</span>argv) {
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>const</span> <span style=color:#078;font-weight:700>char</span> <span style=color:#555>*</span>keyexpr <span style=color:#555>=</span> <span style=color:#c30>&#34;demo/example/**&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Config config;
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>auto</span> session <span style=color:#555>=</span> std<span style=color:#555>::</span>get<span style=color:#555>&lt;</span>Session<span style=color:#555>&gt;</span>(open(std<span style=color:#555>::</span>move(config)));
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>auto</span> subscriber <span style=color:#555>=</span> std<span style=color:#555>::</span>get<span style=color:#555>&lt;</span>Subscriber<span style=color:#555>&gt;</span>(session.declare_subscriber(keyexpr, data_handler));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>while</span> (<span style=color:#366>true</span>) {
</span></span><span style=display:flex><span>        sleep(<span style=color:#f60>1</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#069;font-weight:700>return</span> <span style=color:#f60>0</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This is the very first release of the C++ bindings so the Zenoh team will highly appreciate any help in testing them on various platforms, system architecture, etc. and to <a href=https://github.com/eclipse-zenoh/zenoh-cpp/issues>report any issue</a> you might encounter.
This will help in greatly improving its maturity and robustness.</p><p>In the future, we are planning to bring C++ bindings also on <a href=https://github.com/eclipse-zenoh/zenoh-pico>Zenoh-Pico</a> to natively integrate with C++ embedded systems like Arduino.
At the moment you can use <a href=https://github.com/eclipse-zenoh/zenoh-pico>Zenoh-Pico</a> with the C API on various embedded systems, see <a href=https://github.com/eclipse-zenoh/zenoh-pico/tree/master/examples/arduino>some examples</a>.</p><hr><h1 id=zenoh-pico-and-misra-c>Zenoh-Pico and MISRA-C</h1><p>A considerable <a href=https://github.com/eclipse-zenoh/zenoh-pico/pull/124>amount of work</a> has been done in <a href=https://github.com/eclipse-zenoh/zenoh-pico>Zenoh-Pico</a> to adhere to <a href=https://www.misra.org.uk/misra-c/>MISRA-C guidelines</a>.
As a result, Zenoh-Pico becomes an even more attractive option for those environments where MISRA-C compliance is an important safety requirement.</p><hr><h1 id=connectivity-status-and-notifications>Connectivity status and notifications</h1><p>Zenoh now has an experimental support that exposes connectivity status and notifications.
The status and events can be queried or subscribed to in the following key space: <code>@/session/&lt;local_zid>/**</code>.<br>A more in-depth explanation and examples can be found in the dedicated <a href=https://github.com/eclipse-zenoh/roadmap/blob/main/rfcs/ALL/Connectivity%20Status%20and%20Events.md>RFC</a>.</p><hr><h1 id=whats-next>What’s next?</h1><p>This release has been a pleasant ride together with the Zenoh community who significantly helped in improving the quality of Zenoh and to bring to the table many tantalizing ideas about its future.
So, a big thanks goes to our Zenoh community! You made the difference!</p><p><img src=../../img/20220930-blog-zenoh-bahamut/zenoh-on-fire.gif alt=Guitar></p><p>If you enjoyed the ride so far, are you ready to continue the journey with Zenoh? These are the cool features you can expect for the months to come:</p><ul><li>More <a href=https://github.com/eclipse-zenoh/roadmap/issues/35>DDS features</a> in the Zenoh plugin for DDS</li><li>A ROS1 bridge</li><li>Transparent data compression</li><li>Key Formatters</li><li>Zenoh over LoRA</li></ul><p>And many other cool things&mldr;</p><p>And don’t forget to stay in touch with the Zenoh team on <a href=https://discord.gg/vSDSpqnbkm>Discord</a> and to propose new features on the <a href=https://github.com/eclipse-zenoh/roadmap/discussions>roadmap</a>.</p><p><a href=https://github.com/orgs/eclipse-zenoh/people><strong>&ndash;The Zenoh Team</strong></a></p><div class=ato-next><b>Next up</b>: <a href=../../blog/2022-11-29-zenoh-alignment/>Keeping storages aligned in Zenoh</a></div></main></div></div><footer class="ato-footer text-muted"><div class="container-fluid p-6 p-md-5"><div class=row><div class=col-md-2><h5>Eclipse Incubation</h5><p><img src=../../img/eclipse-incubation.png style=width:100px></p><p>Eclipse zenoh &trade; is an incubating project under the Eclipse Foundation.</p></div><div class=col-md-2><h5>More Information</h5><p><a href=https://www.eclipse.org/legal target=_blank>Legal</a></p><p><a href=https://www.eclipse.org/legal/privacy.php target=_blank>Privacy policy</a></p><p><a href=https://www.eclipse.org/legal/termsofuse.php target=_blank>Terms of use</a></p><p><a href=https://www.eclipse.org/legal/copyright.php target=_blank>Copyright</a></p><p><a href=https://www.eclipse.org/security/ target=_blank>Report a security issue</a></p><p><a href=https://www.eclipse.org/legal/epl-2.0/ target=_blank>Eclipse Public License 2.0</a></p><p><a href=https://www.apache.org/licenses/LICENSE-2.0 target=_blank>Apache License 2.0</a></p><p><a href=https://www.eclipse.org/ target=_blank>Eclipse Foundation</a></p></div><div class=col-md-2><h5>Sponsored by:</h5><p><a href=https://www.eclipse.org target=_blank><img src=../../img/eclipse-foundation.svg style=width:120px></a></p><p><a href=https://zettascale.tech target=_blank><img src=../../img/zettascale-dark.svg style=width:120px></a></p></div><div class=col-md-2><h5>Follow us</h5><p><a href=https://github.com/eclipse-zenoh/zenoh><i class="fa fa-github" aria-hidden=true></i>
GitHub</a></p><p><a href=https://discord.gg/vSDSpqnbkm><i class="fa fa fa-comments-o" aria-hidden=true></i>
Discord</a></p><p><a href=https://www.youtube.com/channel/UCslbiyiqgOAPMjCrPWIfQ5Q><i class="fa fa-youtube-play" aria-hidden=true></i> Youtube</a></p><p><a href=../../docs/overview/what-is-zenoh><i class="fa fa-info-circle" aria-hidden=true></i> About</a></p></div><div class=col-md-2><p><img src=../../img/zenoh-dragon-150x163.png style=width:45px></p><p>Eclipse zenoh &trade; is free, open source and always will be.</p><p>Copyright &copy 2022 Eclipse Foundation</p><p>Built with <a href=https://gohugo.io/ target=_blank>HUGO</a></p></div></div></div></footer><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js integrity=sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7 crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js integrity=sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8 crossorigin=anonymous></script>
<script src=../../js/bootstrap.min.js></script>
<script src=../../js/highlight.min.js></script>
<script>$(function(){$("pre code").each(function(e,t){if(t.className.indexOf("language-rust")>=0){for(var s="",n=t.textContent.split(`
`),e=0;e<n.length;e++){if(n[e].indexOf("# ")==0||n[e]=="#")continue;s+=n[e].trimRight()+`
`}t.textContent=s.replace(/\n\n\n/g,`

`).trimRight()}hljs.highlightBlock(t)})})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-41082619-2","auto"),ga("send","pageview"))</script></body></html>